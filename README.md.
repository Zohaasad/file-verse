# OFS â€“ Omni File Server

OFS is a multi-user, TCP-based file server providing a virtual filesystem interface. Clients can manage files and directories, perform read/write operations, and view metadata securely via session-based access. The client interface is terminal-based, menu-driven, and intuitive.

## Features

- Multi-user authentication with `admin` and `normal` roles.
- File operations: create, read, edit, delete, rename, truncate.
- Directory operations: create, list, delete.
- Session management and permissions enforcement.
- JSON-based protocol for structured communication.
- Multi-threaded server handling concurrent client connections.
- Terminal-based client with arrow key navigation and input prompts.

## System Requirements

- Linux or macOS.
- C++17 compiler (e.g., g++).
- Python 3.8+ (for terminal client).
- Network access between client and server.
- Precompiled configuration and filesystem files:
  - `compiled/sample.omni`
  - `compiled/default.uconf`

## Installation & Build

### 1. Compile the server

Navigate to the server source directory and compile:

```bash
cd ~/Documents/fileverse_project/compiled/server
g++ -std=c++17 server.cpp main_server.cpp -pthread -o ofs_server
```

- `-std=c++17` ensures C++17 compatibility.
- `-pthread` enables multi-threading support.
- Output executable: `ofs_server`.

### 2. Ensure configuration files exist

Check that these files are present in `compiled/`:

```
compiled/sample.omni        # Precompiled virtual filesystem image
compiled/default.uconf      # Server configuration (port, max connections, etc.)
```

- These files define the filesystem and server settings.
- The server reads these files during startup.

### 3. Start the server

Run the compiled server executable:

```bash
./ofs_server
```

- The server listens on default port 8080.
- Configuration options (e.g., `port`, `max_connections`, `queue_timeout`) can be adjusted in `default.uconf`.
- Keep this terminal running to accept client connections.

### 4. Launch the terminal client

Open a new terminal and navigate to your project directory:

```bash
cd ~/Documents/fileverse_project
python3 source/ui/ofs_terminal_ui.py
```

- The client connects to `localhost:8080` by default.
- To connect to a remote server or different port, edit `SERVER_HOST` and `SERVER_PORT` in `ofs_terminal_ui.py`.

## Usage Notes

### Navigation

- Arrow keys to move through menus.
- Enter to select options.
- Esc to cancel or go back.

### Admin Privileges

Required for:
- Adding/removing users.
- Modifying permissions.

### JSON Responses

All server responses are structured:

```json
{
  "status": "success",
  "operation": "read_file",
  "request_id": "0",
  "error_message": "",
  "data": "File content here"
}
```

### Error Handling

If an operation fails, `error_message` contains a descriptive message.

## Quick Start Example

### 1. Start server

```bash
cd ~/Documents/fileverse_project/compiled/server
./ofs_server
```

### 2. Launch client

```bash
cd ~/Documents/fileverse_project
python3 source/ui/ofs_terminal_ui.py
```

### 3. Login

- Username: `admin`
- Password: `password123` (default set during formatting)

### 4. Perform operations

Navigate the client menu to:
- Create, read, edit, delete files.
- Create, list, delete directories.
- Manage users (admin only).
- Set permissions and view metadata.

